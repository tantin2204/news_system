{% extends "core/base.html" %}
{% block title %}{% if a %}Sửa bài{% else %}Đăng tin{% endif %}{% endblock %}

{% block content %}
<div class="form-container">
  <h2 style="text-align:center; margin-bottom:1.5rem;">
    {% if a %}Sửa bài{% else %}Đăng tin{% endif %}
  </h2>

  <form method="post">
    {% csrf_token %}

    <div class="form-group">
      <label class="form-label">Tiêu đề</label>
      <input class="form-input" name="title" value="{{ a.title|default:'' }}" required>
    </div>

    <div class="form-group">
      <label class="form-label">Mô tả ngắn</label>
      <input class="form-input" name="short_desc" value="{{ a.short_desc|default:'' }}" maxlength="500" required>
    </div>

    <div class="form-group">
      <label class="form-label">Nội dung</label>
      <textarea class="form-textarea" name="content" rows="8" required>{{ a.content|default:'' }}</textarea>
    </div>

    <div class="form-group">
      <label class="form-label">Danh mục</label>
      <select class="form-input" name="category_id" required>
        {% for c in categories %}
          <option value="{{ c.id }}" {% if a and a.category_id == c.id %}selected{% endif %}>{{ c.name }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="form-group">
      <label class="form-label">Ngày đăng (ISO)</label>
      <input type="datetime-local" class="form-input" 
             name="published_at" 
             value="{% if a %}{{ a.published_at|date:'Y-m-d\\TH:i' }}{% endif %}">
    </div>

    <div class="form-group" style="text-align:center;">
      <button type="submit" class="form-button">Lưu</button>
    </div>
  </form>
</div>
{% endblock %}
